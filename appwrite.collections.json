{
  "version": "1.0",
  "resources": [
    {
      "resource": "database",
      "$id": "main",
      "name": "main",
      "enabled": true
    },
    {
      "resource": "collection",
      "databaseId": "main",
      "$id": "progress",
      "name": "progress",
      "documentSecurity": true,
      "enabled": true,
      "permissions": [],
      "attributes": [
        {
          "key": "userId",
          "type": "string",
          "size": 128,
          "required": true,
          "array": false
        },
        {
          "key": "journeySlug",
          "type": "string",
          "size": 64,
          "required": true,
          "array": false
        },
        {
          "key": "step",
          "type": "integer",
          "required": false,
          "array": false,
          "min": 0
        },
        {
          "key": "percent",
          "type": "double",
          "required": false,
          "array": false,
          "min": 0,
          "max": 100
        },
        {
          "key": "state",
          "type": "string",
          "size": 16384,
          "required": false,
          "array": false
        },
        {
          "key": "updatedAt",
          "type": "datetime",
          "required": false,
          "array": false
        }
      ],
      "indexes": [
        {
          "key": "userJourney",
          "type": "key",
          "attributes": ["userId", "journeySlug"],
          "orders": ["ASC", "ASC"]
        },
        {
          "key": "user",
          "type": "key",
          "attributes": ["userId"],
          "orders": ["ASC"]
        }
      ]
    },
    {
      "resource": "collection",
      "databaseId": "main",
      "$id": "events",
      "name": "events",
      "documentSecurity": true,
      "enabled": true,
      "permissions": [],
      "attributes": [
        {
          "key": "userId",
          "type": "string",
          "size": 128,
          "required": true,
          "array": false
        },
        {
          "key": "type",
          "type": "string",
          "size": 64,
          "required": true,
          "array": false
        },
        {
          "key": "journeySlug",
          "type": "string",
          "size": 64,
          "required": false,
          "array": false
        },
        {
          "key": "metadata",
          "type": "string",
          "size": 32768,
          "required": false,
          "array": false
        },
        {
          "key": "createdAt",
          "type": "datetime",
          "required": true,
          "array": false
        }
      ],
      "indexes": [
        {
          "key": "userTime",
          "type": "key",
          "attributes": ["userId", "createdAt"],
          "orders": ["ASC", "DESC"]
        }
      ]
    }
  ]
}
