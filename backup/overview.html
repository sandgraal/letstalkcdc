<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- SEO Tags -->
    <title>
      Advanced CDC Patterns: Series Overview | CDC: The Missing Manual
    </title>
    <meta
      name="description"
      content="An overview of the advanced patterns for production-grade Change Data Capture (CDC), covering exactly-once semantics, multi-tenancy, partitioning, and more."
    />

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Global Header -->
    <header class="global-header">
      <div class="nav-container">
        <a href="index.html" class="site-title"
          >CDC: The Missing Manual | Series Overview</a
        >
        <nav class="nav-links">
          <a href="index.html">Home</a>
          <a href="overview.html" class="active">The Series</a>
        </nav>
      </div>
    </header>

    <main>
      <div class="prose" style="text-align: center; margin-bottom: 3rem">
        <h1>Series Overview</h1>
        <p class="text-xl text-slate-600">
          This series serves as a definitive guide to the advanced patterns that
          distinguish a fragile CDC pipeline from a resilient, reliable data
          bloodstream. We will shift from the "what" of CDC to the "how,"
          providing a blueprint for success in the real world.
        </p>
      </div>

      <!-- Series Card Grid -->
      <div class="series-card-grid">
        <!-- Card 1: Exactly-Once -->
        <a href="exactly-once.html" class="series-card">
          <span class="card-tag">Section 1</span>
          <h3 class="card-title">Exactly-Once Semantics</h3>
          <p class="card-description">
            Move beyond simple data duplication to guaranteeing absolute data
            integrity and trust in your pipeline.
          </p>
        </a>

        <!-- Card 2: Multi-Tenancy -->
        <a href="multi-tenancy.html" class="series-card">
          <span class="card-tag">Section 2</span>
          <h3 class="card-title">Multi-Tenant CDC Architectures</h3>
          <p class="card-description">
            Architect for massive scale with hundreds of data sources without
            compromising isolation or security.
          </p>
        </a>

        <!-- Card 3: Partitioning (Coming Soon) -->
        <div class="series-card disabled">
          <span class="card-tag">Section 3</span>
          <h3 class="card-title">Advanced Partitioning Strategies</h3>
          <p class="card-description">
            Optimize system performance and throughput by intelligently
            distributing data across your infrastructure.
          </p>
        </div>

        <!-- Card 4: Auditing (Coming Soon) -->
        <div class="series-card disabled">
          <span class="card-tag">Section 4</span>
          <h3 class="card-title">Auditing and Reconciliation</h3>
          <p class="card-description">
            Establish continuous verification processes to ensure data quality
            and build stakeholder confidence.
          </p>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <p>
        &copy; 2025 Christopher Ennis. A deep dive into the world of Change Data
        Capture.
      </p>
    </footer>
    <!-- Add near the end of <body> on all pages -->
    <script type="module">
      // --- Dark mode toggle ---
      const apply = (m) => (document.documentElement.dataset.theme = m);
      const saved = localStorage.getItem("theme");
      const prefersDark = matchMedia("(prefers-color-scheme: dark)").matches;
      apply(saved ?? (prefersDark ? "dark" : "light"));
      document.addEventListener("click", (e) => {
        if (e.target.matches("[data-toggle-theme]")) {
          const next =
            document.documentElement.dataset.theme === "dark"
              ? "light"
              : "dark";
          apply(next);
          localStorage.setItem("theme", next);
        }
      });

      // --- Reduced motion guard for animations ---
      const reduceMotion = matchMedia(
        "(prefers-reduced-motion: reduce)"
      ).matches;
      if (reduceMotion) document.documentElement.classList.add("reduce-motion");

      // --- Copy buttons for code ---
      document.querySelectorAll("pre > code").forEach((code) => {
        const btn = Object.assign(document.createElement("button"), {
          textContent: "Copy",
          className: "copy-btn",
        });
        const pre = code.parentElement;
        pre.style.position = "relative";
        pre.appendChild(btn);
        btn.addEventListener("click", async () => {
          await navigator.clipboard.writeText(code.innerText);
          btn.textContent = "Copied!";
          setTimeout(() => (btn.textContent = "Copy"), 1200);
        });
      });

      // --- Heading anchors ---
      document.querySelectorAll(".prose h2, .prose h3").forEach((h) => {
        const id =
          h.id ||
          h.textContent
            .toLowerCase()
            .trim()
            .replace(/[^a-z0-9]+/g, "-");
        h.id = id;
        const a = Object.assign(document.createElement("a"), {
          href: `#${id}`,
          className: "anchor",
          ariaLabel: "Link to section",
        });
        h.appendChild(a);
      });

      // --- Lightweight search (builds an index from links + headings) ---
      const pages = [
        "index.html",
        "overview.html",
        "exactly-once.html",
        "multi-tenancy.html",
      ];
      async function buildIndex() {
        const docs = await Promise.all(
          pages.map((p) =>
            fetch(p, { credentials: "omit" })
              .then((r) => r.text())
              .then((html) => ({ p, html }))
          )
        );
        return docs.map(({ p, html }) => {
          const tmp = document.createElement("div");
          tmp.innerHTML = html;
          const title = (tmp.querySelector("title")?.textContent || "").trim();
          const text = Array.from(
            tmp.querySelectorAll(
              ".prose p, .prose li, .prose h1, .prose h2, .prose h3"
            )
          )
            .map((n) => n.textContent.trim())
            .join(" ");
          return { p, title, text: text.slice(0, 50000) }; // cap to keep it snappy
        });
      }
      const searchBox = document.querySelector("#site-search");
      const resultsBox = document.querySelector("#search-results");
      if (searchBox && resultsBox) {
        const index = await buildIndex();
        searchBox.addEventListener("input", (e) => {
          const q = e.target.value.trim().toLowerCase();
          resultsBox.innerHTML = "";
          if (!q) return;
          const hits = index
            .map((d) => {
              const i = d.text.toLowerCase().indexOf(q);
              const ctx =
                i > 40 ? d.text.slice(i - 40, i + 160) : d.text.slice(0, 200);
              return { score: i === -1 ? Infinity : i, d, ctx };
            })
            .filter((h) => h.score !== Infinity)
            .sort((a, b) => a.score - b.score)
            .slice(0, 6);
          hits.forEach(({ d, ctx }) => {
            const li = document.createElement("li");
            li.innerHTML = `<a href="${d.p}">${
              d.title || d.p
            }</a><div class="hit">${ctx.replaceAll(
              q,
              `<mark>${q}</mark>`
            )}</div>`;
            resultsBox.appendChild(li);
          });
        });
      }
    </script>
  </body>
</html>
