.callout {
          border-left: 4px solid #6b7280;
          padding: 0.75rem 1rem;
          margin: 1rem 0;
          background: #f7f7f7;
        }
        .callout strong {
          color: #111827;
        }
        pre {
          position: relative;
          overflow: auto;
        }
        .copy-btn {
          position: absolute;
          top: 0.4rem;
          right: 0.4rem;
          font: inherit;
          padding: 0.2rem 0.5rem;
          border-radius: 0.5rem;
          border: 1px solid #d1d5db;
          background: #fff;
          cursor: pointer;
        }
        code,
        pre code {
          white-space: pre-wrap;
        }
        section {
          scroll-margin-top: 5rem;
        }
        figure svg {
          max-width: 100%;
          height: auto;
        }

/* SME DARK CALLOUT */
        html[data-theme="dark"] .callout {
          background: rgba(255, 255, 255, 0.06);
          border-left-color: #9ca3af;
        }
        html[data-theme="light"] .callout {
          background: #f7f7f7;
          border-left-color: #6b7280;
        }

:root {
          --sme-accent: #22d3ee;
        } /* teal accent */
        html[data-theme="dark"] .callout {
          background: rgba(255, 255, 255, 0.06);
          border-left-color: var(--sme-accent);
        }
        html[data-theme="light"] .callout {
          background: #f7f7f7;
          border-left-color: #6b7280;
        }
        html[data-theme="dark"] pre {
          background: #0b1220;
          border: 1px solid #1f2937;
        }
        html[data-theme="dark"] pre code {
          background: transparent;
        }
        html[data-theme="dark"] code {
          background: rgba(255, 255, 255, 0.06);
          color: #e5e7eb;
          border-radius: 4px;
          padding: 0 0.25rem;
        }
        html[data-theme="dark"] kbd {
          background: rgba(255, 255, 255, 0.08);
          border: 1px solid #374151;
          color: #e5e7eb;
          border-radius: 4px;
          padding: 0 0.25rem;
        }
        html[data-theme="dark"] mark {
          background: rgba(34, 211, 238, 0.18);
          color: #e5e7eb;
        }
        html[data-theme="dark"] .prose code::before,
        html[data-theme="dark"] .prose code::after {
          content: "";
        }
        .copy-btn {
          transition: background 0.15s ease, border-color 0.15s ease,
            color 0.15s ease;
        }
        html[data-theme="dark"] .copy-btn {
          background: #0b1220;
          border-color: #374151;
          color: #e5e7eb;
        }
        html[data-theme="dark"] .copy-btn:hover {
          background: #111827;
          border-color: #4b5563;
        }
        html[data-theme="dark"] details {
          background: rgba(255, 255, 255, 0.04);
          border: 1px solid #1f2937;
          border-radius: 0.5rem;
          padding: 0.5rem 0.75rem;
        }
        html[data-theme="dark"] details > summary {
          cursor: pointer;
        }

:root {
          --cdc-bg: #0b1220;
          --cdc-surface: #0f172a;
          --cdc-border: #1f2937;
          --cdc-text: #e5e7eb;
          --cdc-muted: #9ca3af;
          --cdc-accent: #22d3ee; /* teal from overview */
          --cdc-accent-2: #a78bfa; /* purple tags */
        }
        /* Handoff stepper (uses your theme tokens) */
        .handoff {
          margin: 0.75rem 0 1.25rem;
        }
        .handoff-steps {
          display: grid;
          grid-auto-flow: column;
          align-items: stretch;
          gap: 0.5rem;
        }
        @media (max-width: 760px) {
          .handoff-steps {
            grid-auto-flow: row;
          }
          .handoff .arrow {
            justify-self: center;
            transform: rotate(90deg);
          }
        }
        .handoff .stage {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          background: linear-gradient(
            180deg,
            rgba(34, 211, 238, 0.08),
            rgba(167, 139, 250, 0.06)
          );
          border: 1px solid var(--cdc-border);
          border-radius: 0.7rem;
          padding: 0.9rem 0.95rem;
          box-shadow: 0 0 0 1px rgba(34, 211, 238, 0.08) inset;
        }
        .handoff .stage:hover {
          border-color: color-mix(
            in oklab,
            var(--cdc-accent) 35%,
            var(--cdc-border)
          );
          box-shadow: 0 0 0 1px
            color-mix(in oklab, var(--cdc-accent) 35%, transparent) inset;
        }
        .handoff .num {
          flex: 0 0 auto;
          width: 1.8rem;
          height: 1.8rem;
          line-height: 1.8rem;
          text-align: center;
          font-weight: 700;
          border-radius: 999px;
          background: radial-gradient(
            75% 75% at 30% 30%,
            var(--cdc-accent),
            var(--cdc-accent-2)
          );
          color: #0b1220; /* high contrast badge text */
          filter: drop-shadow(0 0 6px rgba(34, 211, 238, 0.25));
        }
        .handoff .stage-body {
          display: grid;
          gap: 0.15rem;
        }
        .handoff .stage-title {
          font-weight: 600;
          color: var(--cdc-text);
        }
        .handoff .stage-sub {
          font-size: 0.9rem;
          color: var(--cdc-muted);
        }
        .handoff .arrow {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0 0.25rem;
          color: var(--cdc-muted);
        }
        .handoff-cap {
          color: var(--cdc-muted);
          margin: 0.5rem 0 0;
        }
        html[data-theme="dark"] body {
          background: var(--cdc-bg);
          color: var(--cdc-text);
        }
        html[data-theme="dark"] .page-wrap.prose {
          color: var(--cdc-text);
        }
        html[data-theme="dark"] .prose {
          max-width: 70ch;
        }
        html[data-theme="dark"] .prose h1,
        html[data-theme="dark"] .prose h2,
        html[data-theme="dark"] .prose h3 {
          color: var(--cdc-text);
        }
        html[data-theme="dark"] .prose h2 {
          border-bottom: 1px solid var(--cdc-border);
          padding-bottom: 0.25rem;
          margin-top: 2rem;
        }
        html[data-theme="dark"] .prose a {
          color: var(--cdc-accent);
        }
        html[data-theme="dark"] .prose a:hover {
          text-decoration: underline;
        }
        html[data-theme="dark"] .prose ul > li::marker {
          color: var(--cdc-accent);
        }
        html[data-theme="dark"] .prose ol > li::marker {
          color: var(--cdc-accent-2);
        }
        html[data-theme="dark"] .prose li {
          margin-left: 0.15rem;
        }
        html[data-theme="dark"] details {
          background: rgba(255, 255, 255, 0.04);
          border: 1px solid var(--cdc-border);
          border-radius: 0.6rem;
          padding: 0.55rem 0.75rem;
        }
        html[data-theme="dark"] details > summary {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          background: var(--cdc-surface);
          border: 1px solid var(--cdc-border);
          border-radius: 0.5rem;
          padding: 0.5rem 0.75rem;
          color: var(--cdc-text);
        }
        html[data-theme="dark"] details[open] > summary {
          border-color: var(--cdc-accent);
        }
        html[data-theme="dark"] .callout {
          background: rgba(34, 211, 238, 0.06);
          border-left: 4px solid var(--cdc-accent);
          color: var(--cdc-text);
        }
        html[data-theme="dark"] .callout strong {
          color: var(--cdc-text);
        }
        html[data-theme="dark"] pre {
          background: var(--cdc-surface);
          border: 1px solid var(--cdc-border);
          border-radius: 0.6rem;
        }
        html[data-theme="dark"] code {
          background: rgba(255, 255, 255, 0.06);
          color: var(--cdc-text);
          border-radius: 4px;
          padding: 0 0.25rem;
        }
        html[data-theme="dark"] .prose code::before,
        html[data-theme="dark"] .prose code::after {
          content: "";
        }
        .copy-btn {
          transition: background 0.15s ease, border-color 0.15s ease,
            color 0.15s ease;
        }
        html[data-theme="dark"] .copy-btn {
          background: var(--cdc-surface);
          border-color: var(--cdc-border);
          color: var(--cdc-text);
        }
        html[data-theme="dark"] .copy-btn:hover {
          background: #111827;
          border-color: #4b5563;
        }
        html[data-theme="dark"] figure figcaption {
          color: var(--cdc-muted);
        }
        html[data-theme="dark"] blockquote {
          border-left: 3px solid var(--cdc-accent-2);
          background: rgba(167, 139, 250, 0.06);
        }
